CREATE DATABASE {{ sonar_db_name }} CHARACTER SET utf8 COLLATE utf8_general_ci;

CREATE USER '{{ sonar_db_user }}'@'%' IDENTIFIED BY '{{ sonar_db_pass }}';

GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, FILE, INDEX, ALTER,
  CREATE TEMPORARY TABLES, CREATE VIEW, EVENT, TRIGGER, SHOW VIEW,
  CREATE ROUTINE, ALTER ROUTINE, EXECUTE, LOCK TABLES ON *.* TO 'sonar_db_user'@'%'
  IDENTIFIED BY '{{ sonar_db_pass }}' WITH MAX_QUERIES_PER_HOUR 0
  MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 MAX_USER_CONNECTIONS 0;

GRANT ALL PRIVILEGES ON `{{ sonar_db_name }}`.* TO '{{ sonar_db_user }}'@'%';
